{"version":3,"sources":["webpack:///./src/page/End/shaders/f.glsl","webpack:///./src/page/End/shaders/v.glsl","webpack:///./src/page/End/render.js","webpack:///src/page/End/index.vue","webpack:///./src/page/End/index.vue?3253","webpack:///./src/page/End/index.vue","webpack:///./src/js/lib/glTools/index.js"],"names":["module","exports","render","page","cvs","gl","w","width","h","height","points","Float32Array","step","a","i","j","push","createPoints","now","Date","getTime","lastTime","isPlay","program","glTools","v_default","f_default","attributes","type","bufferData","a_position","value","FLOAT","uniforms","u_resolution","u_time","useProgram","enable","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","run","time","newTime","requestAnimationFrame","clear","COLOR_BUFFER_BIT","drawArrays","POINTS","length","End","created","this","renders","mounted","$refs","getContext","offsetWidth","offsetHeight","viewport","clearColor","close","beforeDestroy","page_End","_h","$createElement","_c","_self","attrs","id","_v","ref","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","createProgram","vss","fss","createShader","VERTEX_SHADER","FRAGMENT_SHADER","linkProgram","webgl","source","shader","shaderSource","compileShader","attachShader","createBuffer","usage","buffer","bindBuffer","ARRAY_BUFFER","data","index","len","attr","getAttribLocation","Array","isArray","enableVertexAttribArray","vertexAttribPointer","STATIC_DRAW","getUniformLocation"],"mappings":"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","file":"static/js/2.6c1d6ac8764c66996b69.js","sourcesContent":["module.exports = \"precision mediump float;\\r\\nuniform vec2 u_resolution;\\r\\nvarying float v_size;\\r\\nvarying vec2 v_wave;\\r\\n\\r\\nfloat circle(in vec2 _st, in float _radius){\\r\\n    vec2 dist = _st-vec2(0.5);\\r\\n\\treturn 1.-smoothstep(\\r\\n\\t\\t_radius-(_radius*0.01),\\r\\n    \\t_radius+(_radius*0.01),\\r\\n\\t\\tdot(dist,dist)*4.0\\r\\n\\t);\\r\\n}\\r\\n\\r\\nvoid main(){\\r\\n\\tvec2 st = gl_PointCoord.xy;\\r\\n\\r\\n\\tfloat c = circle(st,.1);\\r\\n\\tfloat pct = distance(st,vec2(.5));\\r\\n\\r\\n\\tvec3 color = vec3(1.0,.5,pct*v_wave.y) + vec3(c)*v_wave.y*v_wave.x;\\r\\n\\t\\r\\n\\r\\n\\tgl_FragColor=vec4(color,(v_size+.5)*(1.0-pct-.5));\\r\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/End/shaders/f.glsl\n// module id = X4B8\n// module chunks = 2","module.exports = \"precision mediump float;\\r\\nattribute vec2 a_position;\\r\\nuniform vec2 u_resolution;\\r\\nuniform float u_time;\\r\\nvarying float v_size;\\r\\nvarying vec2 v_wave;\\r\\nvoid main(){\\r\\n\\t\\r\\n\\tvec2 st = 2.0*a_position/u_resolution-vec2(1);\\r\\n\\t\\r\\n\\tfloat wave_x=sin(u_time+4.0*st.x);\\r\\n\\r\\n\\tfloat wave_y=sin(2.0*u_time+5.0*st.y);\\r\\n\\r\\n\\tvec2 wave_offset_x=vec2(.05*wave_x,.1*wave_x);\\r\\n\\r\\n\\tvec2 wave_offset_y=vec2(0,.05*wave_y);\\r\\n\\r\\n\\tvec2 position = st*vec2(1,-1)+vec2(0,.7)+wave_offset_x+wave_offset_y;\\r\\n\\r\\n\\tfloat base_size=100.0+50.0*wave_x+25.0*wave_y;\\r\\n\\r\\n\\tfloat size = base_size*(st.y+1.0)/2.0;\\r\\n\\r\\n\\tv_size=size/base_size;\\r\\n\\tv_wave=vec2((wave_x+1.0)/2.0,(wave_y+1.0)/2.0);\\r\\n\\tgl_PointSize=size;\\r\\n\\tgl_Position=vec4(position,0.0,1.0-st.y);\\r\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/End/shaders/v.glsl\n// module id = YRtx\n// module chunks = 2","import * as gt from \"#/js/lib/glTools\";\r\nimport vss from \"./shaders/v.glsl\";\r\nimport fss from \"./shaders/f.glsl\";\r\nexport default function(page){\r\n\tconst cvs=page.cvs;\r\n\t/**@type {WebGLRenderingContext}*/\r\n\tconst gl=page.gl;\r\n\tconst w=cvs.width;\r\n\tconst h=cvs.height;\r\n\tconst size=50;\r\n\tconst points=new Float32Array(createPoints(w,h,size));\r\n\tlet now = new Date().getTime();\r\n\tlet lastTime = now;\r\n\tlet isPlay=true;\r\n\r\n\t\r\n\tconst program=gt.createProgram(gl,vss,fss);\r\n\r\n\tconst attributes={\r\n\t\tpoints:{type:\"buffer\",bufferData:points},\r\n\t\ta_position:{type:\"pointer\",value:[2,gl.FLOAT,false,0,0]}\r\n\t}\r\n\tconst uniforms = {\r\n\t\tu_resolution:{type:\"float\",value:[w,h]},\r\n\t\tu_time:{type:\"float\",value:[new Date().getTime()-now]}\r\n\t}\r\n\tgl.useProgram(program);\r\n\r\n\tgt.setProgramAttribute(gl,program,attributes);\r\n\tgt.setProgramUniform(gl,program,uniforms);\r\n\tgl.enable(gl.BLEND);\r\n\tgl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n\tfunction run(time){\r\n\t\tif(!isPlay){\r\n\t\t\treturn \r\n\t\t}\r\n\t\tlet newTime=new Date().getTime();\r\n\t\tif(newTime-lastTime<1000/60){\r\n\t\t\trequestAnimationFrame(run);\r\n\t\t\treturn \r\n\t\t}\r\n\t\tlastTime=newTime;\r\n\t\tuniforms.u_time.value=[time/1000];\r\n\t\tgt.setProgramUniform(gl,program,uniforms);\r\n\t\tgl.clear(gl.COLOR_BUFFER_BIT);\r\n\t\tgl.drawArrays(gl.POINTS,0,points.length/2);\r\n\t\trequestAnimationFrame(run);\r\n\t}\r\n\trun();\r\n\r\n\treturn ()=>isPlay=false;\r\n\t\r\n}\r\n\r\nfunction createPoints(width,height,step){\r\n\tvar a=[];\r\n\tfor(let i=0;i<height;i+=step){\r\n\t\tfor(let j=0;j<width;j+=step){\r\n\t\t\ta.push(j,i)\r\n\t\t}\r\n\t}\r\n\treturn a;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/page/End/render.js","<template>\r\n\t<div id=\"PEnd\">\r\n\t\t<h1>谢谢</h1>\r\n\t\t<canvas ref=\"cvs\"></canvas>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport renders from \"./render.js\"\r\nexport default {\r\n\tcreated(){\r\n\t\tthis.renders=renders;\r\n\t},\r\n\tmounted(){\r\n\t\tthis.cvs=this.$refs.cvs;\r\n\t\tthis.gl=this.cvs.getContext(\"webgl\");\r\n\t\tthis.cvs.width=this.cvs.offsetWidth;\r\n\t\tthis.cvs.height=this.cvs.offsetHeight;\r\n\t\tthis.gl.viewport(0,0,this.cvs.width,this.cvs.height);\r\n\t\tthis.gl.clearColor(0,0,0,0);\r\n\t\tthis.close=this.renders(this);\r\n\t},\r\n\tbeforeDestroy(){\r\n\t\tthis.close();\r\n\t}\r\n}\r\n</script>\r\n<style>\r\n#PEnd{\r\n\tposition: relative;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\theight: 100%;\r\n\tcolor:#ff9b26;\r\n}\r\n#PEnd canvas{\r\n\tposition: absolute;\r\n\ttop:0;\r\n\tleft:0;\r\n\twidth:100%;\r\n\theight: 100%;\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/page/End/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"PEnd\"}},[_c('h1',[_vm._v(\"谢谢\")]),_vm._v(\" \"),_c('canvas',{ref:\"cvs\"})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-64ca12ca\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/End/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-64ca12ca\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-64ca12ca\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/End/index.vue\n// module id = null\n// module chunks = ","// (function() {\r\n\r\n//     window.$$utils = {\r\n//         getTxt: getTxt,\r\n//         loadGlsl: loadGlsl,\r\n//         createProgram: createProgram,\r\n//         createProgramByShadersURL: createProgramByShadersURL,\r\n//         setProgramAttribute: setProgramAttribute,\r\n//         setProgramUniform: setProgramUniform,\r\n//         createProgram: createProgram,\r\n// \t\tcreateTexByImage: createTexByImage,\r\n// \t\tisPowerOf2:isPowerOf2\r\n//     };\r\n// })();\r\n/**\r\n *网络请求文本数据\r\n *\r\n * @param {string} url\r\n * @param {function} cb\r\n */\r\nfunction getTxt(url, cb) {\r\n  var xhr = new XMLHttpRequest();\r\n  xhr.open(\"GET\", url, true);\r\n  xhr.onload = function() {\r\n    cb(xhr.responseText);\r\n  };\r\n  xhr.send();\r\n}\r\n\r\n/**\r\n * 加载glsl\r\n *\r\n * @param {string} vssURL\r\n * @param {string} fssURL\r\n * @param {function} cb\r\n */\r\nfunction loadGlsl(vssURL, fssURL, cb) {\r\n  var data = {\r\n    vss: \"\",\r\n    fss: \"\"\r\n  };\r\n  getTxt(vssURL, function(txt) {\r\n    data.vss = txt;\r\n    end();\r\n  });\r\n\r\n  getTxt(fssURL, function(txt) {\r\n    data.fss = txt;\r\n    end();\r\n  });\r\n\r\n  function end() {\r\n    if (data.vss && data.fss) {\r\n      cb(data);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 从URL中创建着色器程序\r\n *\r\n * @param {WebGLRenderingContext} gl\r\n * @param {String} vssURL\r\n * @param {String} fssURL\r\n * @param {function} cb\r\n */\r\nfunction createProgramByShadersURL(gl, vssURL, fssURL, cb) {\r\n  loadGlsl(vssURL, fssURL, function(data) {\r\n    cb(createProgram(gl, data.vss, data.fss));\r\n  });\r\n}\r\n\r\n/**\r\n * 创建着色器程序\r\n * @param {WebGLRenderingContext} gl\r\n * @param {String} vss\r\n * @param {String} fss\r\n */\r\nexport function createProgram(gl, vss, fss) {\r\n  var program = gl.createProgram();\r\n  var vShader = createShader(gl, vss, gl.VERTEX_SHADER);\r\n  var fShader = createShader(gl, fss, gl.FRAGMENT_SHADER);\r\n  gl.linkProgram(program);\r\n\r\n  return program;\r\n\r\n  /**创建着色器 */\r\n  function createShader(webgl, source, type) {\r\n    var shader = webgl.createShader(type);\r\n    webgl.shaderSource(shader, source);\r\n    webgl.compileShader(shader);\r\n    webgl.attachShader(program, shader);\r\n    return shader;\r\n  }\r\n}\r\n\r\n/**\r\n * 创建buffer数据\r\n * @param {WebGLRenderingContext} gl\r\n * @param {ArrayBuffer} value\r\n * @param {Number} usage\r\n */\r\nexport function createBuffer(gl, value, usage) {\r\n  var buffer = gl.createBuffer();\r\n  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\r\n  gl.bufferData(gl.ARRAY_BUFFER, value, usage);\r\n  return buffer;\r\n}\r\n\r\n/**\r\n * 统一设置Attribute\r\n *\r\n * @param {WebGLRenderingContext} gl\r\n * @param {WebGLProgram} program\r\n * @param {Object} data\r\n * @param {String} data.type - 可能的值：buffer,pointer,float,int\r\n * @param {Array|ArrayBuffer} data.value - 要绑定的值\r\n * @param {Array|ArrayBuffer} data.bufferData - 当type为buffer类型时，创建buffer的数据\r\n * @param {Number} data.usage - 当type为buffer类型时，创建buffer的类型，默认为gl.STATIC_DRAW\r\n *\r\n */\r\nexport function setProgramAttribute(gl, program, data) {\r\n  var type = \"\";\r\n  var value = null;\r\n  var index = 0;\r\n  var len = 0;\r\n  for (var attr in data) {\r\n    type = data[attr].type;\r\n    value = data[attr].value;\r\n    /**\r\n     * @desc 传递buffer类型数据\r\n     * data[attr]={\r\n     * \ttype,\r\n     *  bufferData,\r\n     *  usage?\r\n     * }\r\n     */\r\n    if (type === \"buffer\") {\r\n      createBuffer(\r\n        gl,\r\n        data[attr].bufferData,\r\n        data[attr].usage || gl.STATIC_DRAW\r\n      );\r\n      continue;\r\n    }\r\n    index = gl.getAttribLocation(program, attr);\r\n\r\n    /**\r\n     * @desc 设置buffer的读取规则\r\n     * data[attr]={\r\n     * \ttype:\"pointer\",\r\n     *  value:[]\r\n     * }\r\n     */\r\n    if (type === \"pointer\") {\r\n      gl.enableVertexAttribArray(index);\r\n      gl.vertexAttribPointer(\r\n        index,\r\n        value[0],\r\n        value[1],\r\n        value[2],\r\n        value[3],\r\n        value[4]\r\n      );\r\n      continue;\r\n    }\r\n\r\n    /**\r\n     * @desc 传递float型数据\r\n     * data[attr]={\r\n     * \ttype,\r\n     * \tvalue:[<int>]\r\n     * }\r\n     */\r\n    if (type === \"float\" && Array.isArray(value)) {\r\n      len = value.length;\r\n      if (len <= 0) {\r\n        continue;\r\n      }\r\n      len > 4 && (len = 4);\r\n      gl[\"vertexAttrib\" + len + \"fv\"](index, value);\r\n      continue;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 统一设置Uniform\r\n *\r\n * @param {WebGLRenderingContext} gl\r\n * @param {WebGLProgram} program\r\n * @param {Object} data\r\n */\r\nexport function setProgramUniform(gl, program, data) {\r\n  var type = \"\";\r\n  var value = null;\r\n  var index = 0;\r\n  var len = 0;\r\n  for (var attr in data) {\r\n    type = data[attr].type;\r\n    value = data[attr].value;\r\n    if (!Array.isArray(value)) {\r\n      continue;\r\n    }\r\n\r\n    len = value.length;\r\n    index = gl.getUniformLocation(program, attr);\r\n    if (type === \"int\") {\r\n      gl[\"uniform\" + len + \"iv\"](index, value);\r\n      continue;\r\n    }\r\n\r\n    if (type === \"float\") {\r\n      gl[\"uniform\" + len + \"fv\"](index, value);\r\n      continue;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 创建纹理贴图\r\n * @param {WebGLRenderingContext} gl - 使用webgl的上下文\r\n * @param {Canvas||Image} image - 要作为纹理的图片对象\r\n * @return {WebglTexture} texture对象\r\n */\r\nexport function createTexByImage(gl, image, index) {\r\n  var texture = gl.createTexture();\r\n  gl.bindTexture(gl.TEXTURE_2D, texture);\r\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\r\n  if (isPowerOf2(image.width) && isPowerOf2(image.height)) {\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n    return texture;\r\n  }\r\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n  return texture;\r\n}\r\n\r\n/**检查数字是否为2的指数\r\n * @param {Number} value - 要检查的值\r\n * @return {Boolean}\r\n */\r\nexport function isPowerOf2(value) {\r\n  return !(value & (value - 1));\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/lib/glTools/index.js"],"sourceRoot":""}